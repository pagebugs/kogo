/* =========================================================
   DESIGN TOKENS — FULL SYSTEM
   (Andy can override all values later)
========================================================= */

:root {

  /* ---------------------------------------------
     COLORS (Semantic + Base Palette)
  --------------------------------------------- */
  --color-primary: #3617CE;
  --color-primary-50: rgba(54, 23, 206, 0.06);
  --color-primary-100: #EDE8FB;
  --color-primary-200: #D1C7F7;

  --color-bg: #ffffff;
  --color-bg-muted: #f7f7f7;

  --color-text: #111;
  --color-text-muted: rgba(0,0,0,0.7);

  --color-border: rgba(0,0,0,0.08);
  --color-hover-bg: rgba(0,0,0,0.06);

  /* success / warning / danger 등 필요하면 추가 */
  --color-success: #0BA95B;
  --color-warning: #F6A100;
  --color-danger: #E5484D;


  /* ---------------------------------------------
     SPACING SCALE (rem 기반)
     e.g. var(--space-4) → 16px
  --------------------------------------------- */
  --space-1: 0.25rem; /* 4px */
  --space-2: 0.5rem;  /* 8px */
  --space-3: 0.75rem; /* 12px */
  --space-4: 1rem;    /* 16px */
  --space-5: 1.25rem; /* 20px */
  --space-6: 1.5rem;  /* 24px */
  --space-7: 2rem;    /* 32px */
  --space-8: 2.5rem;  /* 40px */
  --space-9: 3rem;    /* 48px */

  /* PANEL PADDING */
  --panel-padding-y: var(--space-7);
  --panel-padding-x: var(--space-6);


  /* ---------------------------------------------
     TYPOGRAPHY
  --------------------------------------------- */
  --font-family-base: "SUIT", -apple-system, BlinkMacSystemFont, sans-serif;
  --font-family-heading: "SUIT", sans-serif;

  /* text sizes */
  --font-xs: 0.75rem;  /* 12px */
  --font-sm: 0.875rem; /* 14px */
  --font-base: 1rem;   /* 16px */
  --font-md: 1.125rem; /* 18px */
  --font-lg: 1.25rem;  /* 20px */
  --font-xl: 1.5rem;   /* 24px */
  --font-2xl: 1.875rem;/* 30px */

  /* font weights */
  --font-regular: 400;
  --font-medium: 500;
  --font-semibold: 600;
  --font-bold: 700;


  /* ---------------------------------------------
     RADIUS / SHADOW / BORDERS
  --------------------------------------------- */
  --radius-sm: 4px;
  --radius-md: 8px;
  --radius-lg: 14px;
  --radius-xl: 20px;

  --shadow-sm: 0 1px 3px rgba(0,0,0,0.08);
  --shadow-md: 0 4px 12px rgba(0,0,0,0.12);
  --shadow-lg: 0 8px 28px rgba(0,0,0,0.12);

  --border-width: 1px;
  --border-color: var(--color-border);


  /* ---------------------------------------------
     MOTION / ANIMATION
  --------------------------------------------- */
  --transition-fast: 0.18s ease;
  --transition-medium: 0.28s ease;
  --transition-smooth: 0.35s cubic-bezier(0.22,1,0.36,1);
  --transition-popup: 0.4s cubic-bezier(0.22,1,0.36,1);

  --easing-soft: cubic-bezier(0.22,1,0.36,1);
  --easing-bounce: cubic-bezier(.34,1.56,.64,1);


  /* ---------------------------------------------
     LAYOUT / NAVIGATION / WIDTH
  --------------------------------------------- */
  --container-width: 1180px;
  --nav-height: 72px;

  --panel-max-width: var(--container-width);
  --panel-shadow: var(--shadow-lg);

  /* responsive breakpoints */
  --bp-mobile: 900px;
  --bp-tablet: 1200px;


  /* ---------------------------------------------
     Z-INDEX
  --------------------------------------------- */
  --z-header: 200;   
  --z-dropdown: 150;    /* 메가 드롭다운 패널 */
  --z-overlay-bg: 100;  /* 오버레이 (헤더 아래, 패널 아래) */
}

html, body {
  margin: 0;
  padding: 0;
}

/* =========================================================
   HEADER
========================================================= */
.header {
  position: sticky;
  top: 0;
  z-index: var(--z-header);
  height: var(--nav-height);
  background: rgba(255,255,255,0.85);
  backdrop-filter: blur(12px);
  border-bottom: var(--border-width) solid var(--color-border);
}

.header-inner {
  height: 100%;
}

.nav-container {
  max-width: var(--container-width);
  margin: 0 auto;
  padding: 0;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: var(--space-6);
}

.nav {
  margin-left: var(--space-6);
  margin-right: auto;
}

.logo-dummy, .download-dummy {
  width: 120px;
  height: 32px;
  background: var(--color-primary-50);
  border-radius: var(--radius-md);
}


/* =========================================================
   NAVIGATION
========================================================= */
.nav-list {
  display: flex;
  align-items: center;
  gap: var(--space-6);
  list-style: none;
  margin: 0;
  padding: 0;
}

.nav-button {
  display: inline-flex;
  align-items: center;
  gap: var(--space-1);
  padding: var(--space-2) var(--space-3);
  background: none;
  border: none;
  font-size: var(--font-base);
  font-family: var(--font-family-base);
  cursor: pointer;
  border-radius: var(--radius-md);
  transition: var(--transition-fast);
}

.nav-button:hover {
  background: var(--color-hover-bg);
}

.has-mega-open::after {
  content: "";
  position: fixed; /* 뷰포트 전체를 덮도록 고정 */
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;

  /* 오버레이가 헤더와 패널 사이에 위치해야 하므로, Z-index를 조정합니다. */
  z-index: var(--z-dropdown) - 1; /* 149, 즉 패널(150) 바로 아래에 위치 */

  background: rgba(0, 0, 0, 0.25); /* 반투명 오버레이 색상 */
  pointer-events: none; /* 오버레이를 클릭해도 아래 콘텐츠가 클릭되도록 */

  opacity: 0;
  visibility: hidden; /* 초기에는 완전히 숨김 */
  transition: opacity var(--transition-medium), visibility var(--transition-medium);
}


/* 3. 오버레이 활성화 상태 (핵심 수정) */
/* body에 .has-mega-open 클래스가 있으면, ::after 가상 요소를 활성화합니다. */
body.has-mega-open::after {
  opacity: 1;
  visibility: visible;
}

/* caret rotate */
.caret {
  font-size: var(--font-base);
  transition: transform var(--transition-fast);
}

.nav-button.open .caret {
  transform: rotate(180deg);
}

.nav-item[data-type="dropdown"] {
  position: relative;
}

.nav-item[data-type="dropdown"]::after {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  top: 100%;
  height: 6px;   /* hover buffer zone */
  background: transparent;
}

/* =========================================================
   MEGA PANEL (common)
========================================================= */
.mega-dropdown {
  position: absolute;
  margin-top: 0;
  top: var(--nav-height);
  left: 0;
  width: 100%;
  padding: var(--panel-padding-y) 0;
  background: var(--color-bg);
  border-bottom: var(--border-width) solid var(--color-border);
  box-shadow: var(--panel-shadow);

  opacity: 0;
  transform: translateY(10px);
  pointer-events: none;

  transition:
    opacity var(--transition-smooth),
    transform var(--transition-smooth);
}

.mega-dropdown.open {
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}

.mega-inner {
  max-width: var(--panel-max-width);
  margin: 0 auto;
  padding: 0 var(--space-6);
  display: flex;
  gap: var(--space-9);
}


/* =========================================================
   LAYOUT A (text + right links)
========================================================= */
.layout-a .mega-left {
  flex: 1;
}

.layout-a .mega-right {
  width: 220px;
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}


/* =========================================================
   LAYOUT B (3 columns)
========================================================= */
.layout-b .mega-inner {
  justify-content: space-between;
}

.mega-col {
  width: 30%;
}

.mega-col-title {
  margin-bottom: var(--space-2);
  font-weight: var(--font-semibold);
  font-size: var(--font-base);
}


/* =========================================================
   LAYOUT C (icon + text)
========================================================= */
.layout-c .mega-inner {
  justify-content: space-between;
}

.mega-resource {
  display: flex;
  width: 30%;
  gap: var(--space-3);
}

.mega-icon {
  width: 48px;
  height: 48px;
  background: var(--color-primary);
  border-radius: var(--radius-lg);
}

.mega-text h4 {
  margin: 0;
  font-size: var(--font-md);
  font-weight: var(--font-semibold);
}

.mega-text p {
  margin: var(--space-1) 0 0;
  opacity: 0.7;
  font-size: var(--font-sm);
}


/* =========================================================
   MEGA ITEM
========================================================= */
.mega-item {
  padding: var(--space-3) 0;
  background: none;
  border: none;
  text-align: left;
  font-size: var(--font-base);
  cursor: pointer;

  display: flex;
  justify-content: space-between;
  align-items: center;

  transition: color var(--transition-fast);
}

.mega-item:hover {
  color: var(--color-primary);
}

.arrow {
  opacity: 0;
  transform: translateX(-6px);
  transition: var(--transition-smooth);
  font-size: var(--font-xl);
}

.mega-item:hover .arrow {
  opacity: 1;
  transform: translateX(0);
}


/* =========================================================
   MOBILE LAYOUT
========================================================= */
.mobile-toggle {
  display: none;
  font-size: var(--font-xl);
  background: none;
  border: none;
}

.mobile-menu {
  display: none;
  padding: var(--space-4);
  background: var(--color-bg);
  border-bottom: var(--border-width) solid rgba(0,0,0,0.1);
}

.mobile-item {
  display: block;
  padding: var(--space-3) 0;
  background: none;
  border: none;
  text-align: left;
  font-size: var(--font-base);
}


/* Accordion */
.mobile-accordion {
  margin-top: var(--space-2);
}

.mobile-accordion-title {
  padding: var(--space-3) 0;
  cursor: pointer;
  font-weight: var(--font-medium);
}

.mobile-accordion-body {
  display: none;
  padding-left: var(--space-3);
}

.mobile-accordion-body button {
  display: block;
  padding: var(--space-2) 0;
  background: none;
  border: none;
  text-align: left;
  font-size: var(--font-sm);
}


/* =========================================================
   Responsive
========================================================= */
@media (max-width: var(--bp-mobile)) {
  .nav-list { display: none; }
  .mobile-toggle { display: block; }
  .download-dummy { display: none; }
}
