<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¡œê·¸ì¸ - Kogo</title>
    <!-- ê³µí†µ ìŠ¤íƒ€ì¼ -->
    <link rel="stylesheet" href="../../assets/css/common/tokens.css">
    <link rel="stylesheet" href="../../assets/css/common/base.css">
    <!-- ì¸ì¦ í˜ì´ì§€ ìŠ¤íƒ€ì¼ -->
    <link rel="stylesheet" href="../../assets/css/auth/auth.css">
    <!-- SUIT Font -->
    <link href="https://cdn.jsdelivr.net/gh/sun-typeface/SUIT/fonts/variable/woff2/SUIT-Variable.css" rel="stylesheet">
</head>
<body class="auth-page">

    <div class="auth-container">
        <div class="auth-card">
            <!-- Header -->
            <div class="auth-header">
                <a href="/" class="auth-logo">Kogo</a>
                <h1 class="auth-title">ë¡œê·¸ì¸</h1>
                <p class="auth-subtitle">ì„œë¹„ìŠ¤ ì´ìš©ì„ ìœ„í•´ ë¡œê·¸ì¸í•´ ì£¼ì„¸ìš”</p>
            </div>

            <!-- Login Form -->
            <form class="auth-form" id="loginForm">
                <div class="form-group" id="emailGroup">
                    <label for="email">ì´ë©”ì¼ (ID)</label>
                    <input type="email" id="email" name="email" placeholder="example@company.com" required autocomplete="email">
                    <p class="error-message">ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”</p>
                </div>

                <div class="form-group" id="passwordGroup">
                    <label for="password">ë¹„ë°€ë²ˆí˜¸</label>
                    <div class="input-with-icon">
                        <input type="password" id="password" name="password" placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥" required autocomplete="current-password">
                        <button type="button" class="toggle-password" aria-label="ë¹„ë°€ë²ˆí˜¸ í‘œì‹œ">ğŸ‘</button>
                    </div>
                    <p class="error-message">ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”</p>
                </div>

                <div class="form-options">
                    <label class="remember-me">
                        <input type="checkbox" id="rememberMe" name="rememberMe">
                        <span>ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€</span>
                    </label>
                    <a href="forgot-password.html" class="forgot-link">ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°</a>
                </div>

                <button type="submit" class="auth-btn" id="loginBtn">ë¡œê·¸ì¸</button>
            </form>

            <!-- Footer -->
            <div class="auth-footer">
                <p>ì•„ì§ íšŒì›ì´ ì•„ë‹ˆì‹ ê°€ìš”?</p>
                <a href="signup.html" class="signup-link-btn">íšŒì›ê°€ì… â†’</a>
            </div>
        </div>

        <!-- Service Info -->
        <div class="auth-service-info">
            <p>Â© 2026 Kogo. í•œêµ­ê¸€ë¡œë²Œí—¬ìŠ¤ì¼€ì–´í˜‘ë™ì¡°í•©</p>
        </div>
    </div>

    <script src="../../assets/js/auth/auth.js"></script>
    <script>
        // ë¹„ë°€ë²ˆí˜¸ í‘œì‹œ/ìˆ¨ê¸°ê¸° í† ê¸€
        document.querySelector('.toggle-password').addEventListener('click', function() {
            const passwordInput = document.getElementById('password');
            const isPassword = passwordInput.type === 'password';
            passwordInput.type = isPassword ? 'text' : 'password';
            this.textContent = isPassword ? 'ğŸ™ˆ' : 'ğŸ‘';
        });

        // ì´ë©”ì¼ ìœ íš¨ì„± ê²€ì‚¬
        document.getElementById('email').addEventListener('blur', function() {
            const emailGroup = document.getElementById('emailGroup');
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            
            if (this.value && !emailRegex.test(this.value)) {
                emailGroup.classList.add('error');
            } else {
                emailGroup.classList.remove('error');
            }
        });

        // í¼ ì œì¶œ
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value;
            const btn = document.getElementById('loginBtn');
            
            // í´ë¼ì´ì–¸íŠ¸ ê²€ì¦
            let hasError = false;
            
            if (!email) {
                document.getElementById('emailGroup').classList.add('error');
                hasError = true;
            }
            if (!password) {
                document.getElementById('passwordGroup').classList.add('error');
                hasError = true;
            }
            
            if (hasError) return;
            
            btn.disabled = true;
            btn.textContent = 'ë¡œê·¸ì¸ ì¤‘...';
            
            try {
                const result = await AuthAPI.login(email, password);
                
                if (result.success) {
                    // ë¦¬ë‹¤ì´ë ‰íŠ¸ (ì´ì „ í˜ì´ì§€ ë˜ëŠ” ë©”ì¸)
                    const redirectUrl = new URLSearchParams(window.location.search).get('redirect') || '/touch/index.html';
                    window.location.href = redirectUrl;
                }
            } catch (err) {
                alert('ë¡œê·¸ì¸ ì‹¤íŒ¨: ' + err.message);
            } finally {
                btn.disabled = false;
                btn.textContent = 'ë¡œê·¸ì¸';
            }
        });
    </script>
</body>
</html>
