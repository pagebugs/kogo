1. 1순위: “Sales Contact Inquiry” 구조 재정의 (필수)
왜 먼저인가

지금 Inquiry는 개념적으로 전환이 완료됐지만
DB·API·UX가 아직 ‘질문’ 모델의 흔적을 일부 갖고 있음

실제 목적은 세일즈 컨택 확보

개발 태스크

Inquiry 개념 명확화

Contextual Inquiry ❌

Sales Contact Inquiry ⭕

“질문”이 아니라 “연락 허용 선언 + 맥락 첨부”

DB 스키마 수정

content → optional

contact_allowed (boolean)

contact_method (enum: phone, email, kakao, etc.)

contact_value (암호화 저장)

session_id / sim_id 유지

API 명세 수정

POST /api/inquiry

필수: session_id, contact_method, contact_value

선택: message, sim_id, context_snapshot

보안

비밀번호 모델 제거

contact_value 암호화

rate limit 유지

👉 이게 끝나야 “영업 시스템”이 시작됩니다.

2. 2순위: Session → User “접근 권한 이전” 로직 (핵심 전환)
왜 중요한가

로그인 이후에도 “내가 본 시뮬레이션”을 보여줘야 함

하지만 소유권 귀속은 절대 하면 안 됨

개발 태스크

SimulationAccess 테이블 추가

sim_id

user_id

granted_at

source (login, manual_save 등)

로그인 시 처리

현재 Session에 묶인 Simulation → access grant

과거 Simulation 자동 귀속 ❌

조회 로직

“User가 접근 가능한 Simulation 목록”

Session 기반 + Access 기반 합집합

👉 이게 없으면 Insight Report UX가 불안정해집니다.

3. 3순위: Insight Report 엔티티 분리 구현
목적

Simulation은 불변 로그

Insight Report는 유저 소유 가공물

개발 태스크

InsightReport 테이블

report_id

user_id

sim_id (reference)

generated_at

snapshot (계산 결과 요약)

생성 조건

로그인 상태

sim_id 접근 권한 보유

UX

“이 결과 저장 / 리포트로 보기”

로그인 유도는 여기서만

👉 이게 “로그인의 보상”입니다.

4. 4순위: Order 생성 최소 로직 (영업 시스템의 핵)
목적

Runcomm과 정합될 유일한 상업 단위 생성

개발 태스크

Order 테이블

order_id

user_id

report_id or sim_snapshot

amount

status (ORDERED / RUNNING / DONE)

created_at

Order 생성 트리거

Insight Report 기준

“이 조건으로 광고 진행”

Runcomm 전달 값

order_id (텍스트 레벨 전달로 충분)

👉 API 연동은 아직 불필요.

5. 5순위: 내부 Admin View (아주 최소)
목적

“영업을 우리가 책임진다”의 최소 증명

개발 태스크

Inquiry 리스트

연락처 있음

sim_id / context 요약

Order 리스트

상태

금액

Runcomm 전달 여부

👉 UI는 리스트 + 필터면 충분.

6. 지금 “하지 말아야 할 것” (중요)

❌ 광고 운영 UI

❌ 실시간 집행 현황

❌ 성과 리포트 자동화

❌ Simulation을 User 소유로 만드는 구조

이건 전부 Runcomm 영역이거나, 지금 하면 구조가 무너집니다.